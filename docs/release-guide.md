# ç‰ˆæœ¬å‘å¸ƒæŒ‡å—

æœ¬æ–‡æ¡£æä¾›äº† Claude Code Router å¢å¼ºæ—¥å¿—ç³»ç»Ÿçš„ç‰ˆæœ¬å‘å¸ƒæµç¨‹å’Œç›¸å…³è¯´æ˜ã€‚

## ç‰ˆæœ¬å·è§„èŒƒ

æˆ‘ä»¬éµå¾ª [Semantic Versioning (SemVer)](https://semver.org/) è§„èŒƒï¼š

- **ä¸»ç‰ˆæœ¬å· (Major)**: å½“è¿›è¡Œä¸å…¼å®¹çš„ API æ›´æ”¹æ—¶é€’å¢
- **æ¬¡ç‰ˆæœ¬å· (Minor)**: å½“ä»¥å‘åå…¼å®¹çš„æ–¹å¼æ·»åŠ åŠŸèƒ½æ—¶é€’å¢  
- **ä¿®è®¢ç‰ˆæœ¬å· (Patch)**: å½“è¿›è¡Œå‘åå…¼å®¹çš„é—®é¢˜ä¿®å¤æ—¶é€’å¢

### ç‰ˆæœ¬å·ç¤ºä¾‹

- `1.0.0` - åˆå§‹ç‰ˆæœ¬
- `1.1.0` - æ·»åŠ æ–°åŠŸèƒ½ï¼Œå‘åå…¼å®¹
- `1.1.1` - ä¿®å¤ bugï¼Œå‘åå…¼å®¹
- `2.0.0` - é‡å¤§æ›´æ–°ï¼Œå¯èƒ½åŒ…å«ç ´åæ€§æ›´æ”¹

## å‘å¸ƒæµç¨‹

### 1. å‡†å¤‡å‘å¸ƒ

#### 1.1 æ£€æŸ¥ä»£ç çŠ¶æ€

```bash
# æ£€æŸ¥å·¥ä½œç›®å½•æ˜¯å¦å¹²å‡€
git status

# æ£€æŸ¥å½“å‰åˆ†æ”¯
git branch

# æ‹‰å–æœ€æ–°æ›´æ”¹
git pull origin main

# è¿è¡Œæµ‹è¯•
npm test

# è¿è¡Œæ„å»º
npm run build

# è¿è¡Œä»£ç æ£€æŸ¥
npm run lint
```

#### 1.2 æ›´æ–°ç‰ˆæœ¬å·

```bash
# æ›´æ–° package.json ä¸­çš„ç‰ˆæœ¬å·
npm version patch   # ä¿®å¤ç‰ˆæœ¬
npm version minor   # æ¬¡è¦ç‰ˆæœ¬
npm version major   # ä¸»è¦ç‰ˆæœ¬

# æˆ–è€…æ‰‹åŠ¨ç¼–è¾‘ package.json
```

#### 1.3 æ›´æ–°å˜æ›´æ—¥å¿—

æ ¹æ® [`CHANGELOG.md`](./CHANGELOG.md) æ¨¡æ¿æ›´æ–°å˜æ›´æ—¥å¿—ï¼š

```markdown
## [1.0.1] - 2024-01-15

### Added
- æ–°åŠŸèƒ½æè¿°

### Changed
- æ”¹è¿›æè¿°

### Fixed
- ä¿®å¤æè¿°
```

### 2. å‘å¸ƒæµç¨‹

#### 2.1 è‡ªåŠ¨åŒ–å‘å¸ƒè„šæœ¬

ä½¿ç”¨é¡¹ç›®æä¾›çš„å‘å¸ƒè„šæœ¬ï¼š

```bash
# è¿è¡Œå‘å¸ƒè„šæœ¬
npm run release
```

å‘å¸ƒè„šæœ¬ä¼šè‡ªåŠ¨æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š
1. è¿è¡Œæ‰€æœ‰æµ‹è¯•
2. æ„å»ºé¡¹ç›®
3. æ›´æ–°ç‰ˆæœ¬å·
4. ç”Ÿæˆå˜æ›´æ—¥å¿—
5. åˆ›å»º git æ ‡ç­¾
6. æ¨é€åˆ°è¿œç¨‹ä»“åº“
7. å‘å¸ƒåˆ° npmï¼ˆå¦‚æœé€‚ç”¨ï¼‰

#### 2.2 æ‰‹åŠ¨å‘å¸ƒæµç¨‹

å¦‚æœéœ€è¦æ‰‹åŠ¨å‘å¸ƒï¼š

```bash
# 1. è¿è¡Œæµ‹è¯•
npm test

# 2. æ„å»ºé¡¹ç›®
npm run build

# 3. æäº¤æ›´æ”¹
git add .
git commit -m "release: v1.0.1"

# 4. åˆ›å»ºæ ‡ç­¾
git tag -a v1.0.1 -m "Release version 1.0.1"

# 5. æ¨é€åˆ°è¿œç¨‹
git push origin main
git push origin v1.0.1

# 6. å‘å¸ƒåˆ° npmï¼ˆå¦‚æœéœ€è¦ï¼‰
npm publish
```

### 3. å‘å¸ƒåæ£€æŸ¥

#### 3.1 éªŒè¯å‘å¸ƒ

```bash
# æ£€æŸ¥æ ‡ç­¾æ˜¯å¦æ­£ç¡®åˆ›å»º
git tag -l

# æ£€æŸ¥è¿œç¨‹ä»“åº“
git ls-remote --tags origin

# éªŒè¯åŒ…ç‰ˆæœ¬ï¼ˆå¦‚æœå‘å¸ƒåˆ° npmï¼‰
npm view claude-code-router versions
```

#### 3.2 åŠŸèƒ½éªŒè¯

```bash
# å®‰è£…æ–°ç‰ˆæœ¬
npm install claude-code-router@latest

# è¿è¡ŒåŸºæœ¬åŠŸèƒ½æµ‹è¯•
node -e "
const { LogManager } = require('claude-code-router');
const manager = new LogManager();
manager.initialize().then(() => {
  console.log('âœ… ç‰ˆæœ¬å‘å¸ƒéªŒè¯æˆåŠŸ');
}).catch(err => {
  console.error('âŒ ç‰ˆæœ¬å‘å¸ƒéªŒè¯å¤±è´¥:', err);
});
"
```

## åˆ†æ”¯ç­–ç•¥

### Git åˆ†æ”¯æ¨¡å‹

æˆ‘ä»¬ä½¿ç”¨ Git Flow åˆ†æ”¯ç­–ç•¥ï¼š

```
main           # ä¸»åˆ†æ”¯ï¼Œå§‹ç»ˆå¯å‘å¸ƒ
â”œâ”€â”€ develop    # å¼€å‘åˆ†æ”¯
â”œâ”€â”€ feature/*  # åŠŸèƒ½åˆ†æ”¯
â”œâ”€â”€ hotfix/*   # ç´§æ€¥ä¿®å¤åˆ†æ”¯
â””â”€â”€ release/*  # å‘å¸ƒå‡†å¤‡åˆ†æ”¯
```

### åˆ†æ”¯å‘½åè§„èŒƒ

#### åŠŸèƒ½åˆ†æ”¯
```
feature/enhanced-logging
feature/request-tracking
feature/performance-optimization
```

#### ä¿®å¤åˆ†æ”¯
```
hotfix/memory-leak
hotfix/log-rotation
hotfix/config-validation
```

#### å‘å¸ƒåˆ†æ”¯
```
release/v1.0.1
release/v1.1.0
release/v2.0.0
```

## å˜æ›´æ—¥å¿—ç®¡ç†

### å˜æ›´æ—¥å¿—æ ¼å¼

```markdown
# å˜æ›´æ—¥å¿—

æœ¬é¡¹ç›®éµå¾ª [Keep a Changelog](https://keepachangelog.com/) è§„èŒƒã€‚

## [Unreleased]

### Added
- æ–°åŠŸèƒ½ï¼ˆå¾…å‘å¸ƒï¼‰

### Changed
- æ”¹è¿›ï¼ˆå¾…å‘å¸ƒï¼‰

### Fixed
- ä¿®å¤ï¼ˆå¾…å‘å¸ƒï¼‰

## [1.0.0] - 2024-01-01

### Added
- åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- å¢å¼ºæ—¥å¿—ç³»ç»Ÿ
- è¯·æ±‚è·Ÿè¸ªåŠŸèƒ½
- æ€§èƒ½ä¼˜åŒ–
- å®Œæ•´æ–‡æ¡£
```

### å˜æ›´æ—¥å¿—ç»´æŠ¤

#### 1. å¼€å‘é˜¶æ®µ

åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼ŒåŠæ—¶æ›´æ–° `Unreleased` éƒ¨åˆ†ï¼š

```markdown
## [Unreleased]

### Added
- æ·»åŠ æ–°çš„æ—¥å¿—çº§åˆ«æ”¯æŒ
- å®ç°è‡ªå®šä¹‰æµå¤„ç†å™¨
```

#### 2. å‘å¸ƒå‰

å‘å¸ƒå‰å°† `Unreleased` å†…å®¹ç§»åˆ°æ–°ç‰ˆæœ¬ï¼š

```markdown
## [1.0.1] - 2024-01-15

### Added
- æ·»åŠ æ–°çš„æ—¥å¿—çº§åˆ«æ”¯æŒ
- å®ç°è‡ªå®šä¹‰æµå¤„ç†å™¨

## [Unreleased]
```

#### 3. å‘å¸ƒå

æ¸…ç©º `Unreleased` éƒ¨åˆ†ï¼Œä¸ºä¸‹ä¸€ä¸ªç‰ˆæœ¬åšå‡†å¤‡ï¼š

```markdown
## [Unreleased]
```

## å›æ»šç­–ç•¥

### 1. å¿«é€Ÿå›æ»š

å¦‚æœå‘å¸ƒåå‘ç°ä¸¥é‡é—®é¢˜ï¼š

```bash
# å›æ»šåˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬
git checkout v1.0.0

# åˆ›å»ºå›æ»šåˆ†æ”¯
git checkout -b hotfix/rollback-v1.0.1

# ä¿®å¤é—®é¢˜åé‡æ–°å‘å¸ƒ
git checkout main
git merge hotfix/rollback-v1.0.1
git tag v1.0.2
git push origin main v1.0.2
```

### 2. ç´§æ€¥ä¿®å¤

å¯¹äºéœ€è¦ç«‹å³ä¿®å¤çš„é—®é¢˜ï¼š

```bash
# ä»ä¸Šä¸€ä¸ªæ ‡ç­¾åˆ›å»ºä¿®å¤åˆ†æ”¯
git checkout -b hotfix/critical-bug v1.0.1

# ä¿®å¤é—®é¢˜
# ... ä¿®å¤ä»£ç  ...

# æäº¤ä¿®å¤
git commit -m "hotfix: ä¿®å¤å…³é”®é—®é¢˜"

# åˆå¹¶åˆ°ä¸»åˆ†æ”¯
git checkout main
git merge hotfix/critical-bug

# åˆ›å»ºæ–°ç‰ˆæœ¬
git tag v1.0.2
git push origin main v1.0.2
```

## æµ‹è¯•ç­–ç•¥

### 1. å‘å¸ƒå‰æµ‹è¯•æ¸…å•

#### å•å…ƒæµ‹è¯•
```bash
# è¿è¡Œæ‰€æœ‰å•å…ƒæµ‹è¯•
npm run test:unit

# è¿è¡Œç‰¹å®šæ¨¡å—æµ‹è¯•
npm run test:unit LogManager
npm run test:unit RequestTracker
npm run test:unit ErrorLogger
```

#### é›†æˆæµ‹è¯•
```bash
# è¿è¡Œé›†æˆæµ‹è¯•
npm run test:integration

# è¿è¡Œç«¯åˆ°ç«¯æµ‹è¯•
npm run test:e2e
```

#### æ€§èƒ½æµ‹è¯•
```bash
# è¿è¡Œæ€§èƒ½æµ‹è¯•
npm run test:performance

# ç”Ÿæˆæ€§èƒ½æŠ¥å‘Š
npm run test:performance:report
```

#### å…¼å®¹æ€§æµ‹è¯•
```bash
# æµ‹è¯• Node.js ç‰ˆæœ¬å…¼å®¹æ€§
npm run test:compatibility

# æµ‹è¯•å‘åå…¼å®¹æ€§
npm run test:backward-compatibility
```

### 2. æµ‹è¯•è¦†ç›–ç‡è¦æ±‚

- **å•å…ƒæµ‹è¯•è¦†ç›–ç‡**: æœ€ä½ 80%
- **é›†æˆæµ‹è¯•è¦†ç›–ç‡**: æœ€ä½ 70%
- **ç«¯åˆ°ç«¯æµ‹è¯•**: æ‰€æœ‰å…³é”®åŠŸèƒ½å¿…é¡»è¦†ç›–

```bash
# æ£€æŸ¥æµ‹è¯•è¦†ç›–ç‡
npm run test:coverage

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
npm run test:coverage:report
```

## æ–‡æ¡£æ›´æ–°

### 1. æ–‡æ¡£æ£€æŸ¥æ¸…å•

å‘å¸ƒå‰ç¡®ä¿ä»¥ä¸‹æ–‡æ¡£å·²æ›´æ–°ï¼š

- [ ] `README.md` - ä¸»è¦åŠŸèƒ½è¯´æ˜å’Œé…ç½®
- [ ] `CHANGELOG.md` - ç‰ˆæœ¬å˜æ›´è®°å½•
- [ ] `docs/enhanced-logging-guide.md` - ä½¿ç”¨æŒ‡å—
- [ ] `docs/api-reference.md` - API å‚è€ƒ
- [ ] `docs/performance-optimization.md` - æ€§èƒ½ä¼˜åŒ–
- [ ] `docs/troubleshooting.md` - æ•…éšœæ’é™¤
- [ ] `docs/deployment.md` - éƒ¨ç½²æŒ‡å—

### 2. æ–‡æ¡£ç”Ÿæˆè„šæœ¬

```bash
# ç”Ÿæˆ API æ–‡æ¡£
npm run docs:generate

# éªŒè¯æ–‡æ¡£é“¾æ¥
npm run docs:check

# æ„å»ºæ–‡æ¡£ç½‘ç«™
npm run docs:build
```

## å‘å¸ƒé€šçŸ¥

### 1. å†…éƒ¨é€šçŸ¥

å‘å¸ƒå®Œæˆåï¼Œé€šçŸ¥å›¢é˜Ÿæˆå‘˜ï¼š

```markdown
ğŸ‰ **æ–°ç‰ˆæœ¬å‘å¸ƒé€šçŸ¥**

ç‰ˆæœ¬ï¼šv1.0.1
å‘å¸ƒæ—¶é—´ï¼š2024-01-15

### ä¸»è¦æ›´æ–°
- åŠŸèƒ½1æè¿°
- åŠŸèƒ½2æè¿°
- ä¿®å¤1æè¿°

### å‡çº§æŒ‡å—
[å‡çº§æŒ‡å—é“¾æ¥](./docs/upgrade-guide.md)

### æ³¨æ„äº‹é¡¹
- æ³¨æ„äº‹é¡¹1
- æ³¨æ„äº‹é¡¹2

è¯·åŠæ—¶å‡çº§å¹¶åé¦ˆé—®é¢˜ã€‚
```

### 2. ç”¨æˆ·é€šçŸ¥

å¦‚æœé¡¹ç›®æœ‰ç”¨æˆ·ç¤¾åŒºï¼Œå‘å¸ƒå…¬å‘Šï¼š

```markdown
# Claude Code Router v1.0.1 å‘å¸ƒ

æˆ‘ä»¬å¾ˆé«˜å…´åœ°å®£å¸ƒ Claude Code Router v1.0.1 å·²ç»å‘å¸ƒï¼

## æ–°åŠŸèƒ½
- ğŸš€ åŠŸèƒ½1ï¼šæè¿°
- ğŸš€ åŠŸèƒ½2ï¼šæè¿°

## æ”¹è¿›
- âš¡ æ”¹è¿›1ï¼šæè¿°
- âš¡ æ”¹è¿›2ï¼šæè¿°

## ä¿®å¤
- ğŸ› ä¿®å¤1ï¼šæè¿°
- ğŸ› ä¿®å¤2ï¼šæè¿°

## å‡çº§æ–¹å¼
```bash
npm update claude-code-router
```

## æ–‡æ¡£
[æŸ¥çœ‹å®Œæ•´æ–‡æ¡£](https://docs.claude-code-router.com)

æ„Ÿè°¢æ‚¨çš„æ”¯æŒï¼
```

## ç›‘æ§å’Œåé¦ˆ

### 1. å‘å¸ƒåç›‘æ§

å‘å¸ƒå 72 å°æ—¶å†…å¯†åˆ‡ç›‘æ§ï¼š

```bash
# ç›‘æ§é”™è¯¯æ—¥å¿—
tail -f ./logs/error.log

# ç›‘æ§ç³»ç»Ÿæ€§èƒ½
top -p $(pgrep -f claude-code-router)

# æ£€æŸ¥å†…å­˜ä½¿ç”¨
ps aux | grep claude-code-router | awk '{print $4}'
```

### 2. ç”¨æˆ·åé¦ˆæ”¶é›†

å»ºç«‹åé¦ˆæ”¶é›†æœºåˆ¶ï¼š

```typescript
// åé¦ˆæ”¶é›†ç¤ºä¾‹
class FeedbackCollector {
  collect(feedback: UserFeedback) {
    // å­˜å‚¨åé¦ˆ
    this.storeFeedback(feedback);
    
    // åˆ†æåé¦ˆ
    this.analyzeFeedback(feedback);
    
    // å¿…è¦æ—¶åˆ›å»º issue
    if (feedback.severity === 'high') {
      this.createIssue(feedback);
    }
  }
}
```

## ç‰ˆæœ¬å…¼å®¹æ€§

### 1. å‘åå…¼å®¹æ€§æ‰¿è¯º

- **Patch ç‰ˆæœ¬**: å®Œå…¨å‘åå…¼å®¹
- **Minor ç‰ˆæœ¬**: å‘åå…¼å®¹ï¼Œå¯èƒ½æ·»åŠ æ–°åŠŸèƒ½
- **Major ç‰ˆæœ¬**: å¯èƒ½åŒ…å«ç ´åæ€§æ›´æ”¹

### 2. å¼ƒç”¨ç­–ç•¥

å¯¹äºéœ€è¦å¼ƒç”¨çš„åŠŸèƒ½ï¼š

```typescript
// å¼ƒç”¨è­¦å‘Šç¤ºä¾‹
function deprecatedFunction() {
  console.warn('Warning: deprecatedFunction is deprecated and will be removed in v2.0.0. Use newFunction instead.');
  return newFunction();
}
```

### 3. å‡çº§æŒ‡å—

ä¸ºæ¯ä¸ªä¸»è¦ç‰ˆæœ¬æä¾›å‡çº§æŒ‡å—ï¼š

```markdown
# å‡çº§åˆ° v2.0.0

## ç ´åæ€§æ›´æ”¹

### 1. é…ç½®æ ¼å¼å˜æ›´
**æ—§æ ¼å¼ï¼š**
```json
{
  "logLevel": "info"
}
```

**æ–°æ ¼å¼ï¼š**
```json
{
  "level": "info"
}
```

### 2. API å˜æ›´
**æ—§ APIï¼š**
```typescript
logger.log('info', 'message');
```

**æ–° APIï¼š**
```typescript
logger.info('message');
```

## å‡çº§æ­¥éª¤

1. æ›´æ–°é…ç½®æ–‡ä»¶æ ¼å¼
2. æ›´æ–° API è°ƒç”¨
3. è¿è¡Œå…¼å®¹æ€§æµ‹è¯•
4. éƒ¨ç½²åˆ°æµ‹è¯•ç¯å¢ƒ
5. éªŒè¯åŠŸèƒ½
6. éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
```

## å‘å¸ƒæ£€æŸ¥æ¸…å•

### å‘å¸ƒå‰æ£€æŸ¥
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡
- [ ] ä»£ç å®¡æŸ¥å®Œæˆ
- [ ] æ–‡æ¡£æ›´æ–°å®Œæˆ
- [ ] å˜æ›´æ—¥å¿—æ›´æ–°
- [ ] ç‰ˆæœ¬å·æ›´æ–°
- [ ] æ„å»ºæˆåŠŸ
- [ ] å®‰å…¨æ£€æŸ¥é€šè¿‡

### å‘å¸ƒæ—¶æ£€æŸ¥
- [ ] åˆ›å»º git æ ‡ç­¾
- [ ] æ¨é€åˆ°è¿œç¨‹ä»“åº“
- [ ] å‘å¸ƒåˆ°åŒ…ç®¡ç†å™¨
- [ ] å‘å¸ƒé€šçŸ¥å‘é€
- [ ] ç›‘æ§ç³»ç»Ÿå¯ç”¨

### å‘å¸ƒåæ£€æŸ¥
- [ ] åŠŸèƒ½éªŒè¯å®Œæˆ
- [ ] æ€§èƒ½ç›‘æ§æ­£å¸¸
- [ ] é”™è¯¯ç‡åœ¨æ­£å¸¸èŒƒå›´
- [ ] ç”¨æˆ·åé¦ˆæ”¶é›†
- [ ] æ–‡æ¡£è®¿é—®æ­£å¸¸
- [ ] å›æ»šè®¡åˆ’å‡†å¤‡

è¿™ä¸ªç‰ˆæœ¬å‘å¸ƒæŒ‡å—æä¾›äº†å®Œæ•´çš„å‘å¸ƒæµç¨‹ã€æœ€ä½³å®è·µå’Œæ£€æŸ¥æ¸…å•ï¼Œç¡®ä¿æ¯æ¬¡å‘å¸ƒéƒ½èƒ½é¡ºåˆ©è¿›è¡Œå¹¶åŠæ—¶å‘ç°å’Œè§£å†³é—®é¢˜ã€‚